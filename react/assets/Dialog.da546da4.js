import{c as V}from"./modal.css.ts.vanilla.7ff0f3d6.js";import{m as $,c as A}from"./mergeRefs.e715c294.js";import{v as C}from"./index.css.5f68bb4c.js";import{r as s}from"./index.003a9cb9.js";import{P as O,u as T}from"./Portal.b7efe8fb.js";import{j as w,F as R,a as q}from"./jsx-runtime.d19d38a0.js";var F="tmkdjr0",H="tmkdjr1",j="tmkdjr2";const L=260,N=e=>`${e} ${L}ms ${C.transition.easing}`,B=e=>N(e?H:j),P=(e,n,t)=>{const r=t.left+(t.width/2-n.width/2),l=t.top+(t.height/2-n.height/2);let o={left:0,top:0};if(e==="left"&&(o={left:t.left-n.width,top:l}),e==="right"&&(o={left:t.left+t.width,top:l}),e==="top"){const i=r,a=t.top-n.height;o={left:i,top:a}}if(e==="bottom"){const i=r,a=t.top+t.height;o={left:i,top:a}}return o.left<=0&&(o.left=t.left),o.top<=0&&(o.top=t.top),o},G=(e,n,t)=>{if(typeof window=="undefined"||!n||!t)return{top:"0px",left:"0px"};const r=C.spacing.md,l=n.getBoundingClientRect(),{height:o,width:i}=l,a=t.getBoundingClientRect(),{height:g,width:u,left:p,top:h}=a;e==="left"&&p<=i&&(e="right"),e==="right"&&p+u>=window.innerWidth-i&&(e="left"),e==="top"&&h<=o&&(e="bottom"),e==="bottom"&&h+g>=window.innerHeight-o&&(e="top");const c=P(e,l,a),f={};return e==="left"&&(f.left=`calc(${c.left}px - ${r})`),e==="right"&&(f.left=`calc(${c.left}px + ${r})`),e==="top"&&(f.top=`calc(${c.top}px - ${r})`),e==="bottom"&&(f.top=`calc(${c.top}px + ${r})`),{top:`${c.top}px`,left:`${c.left}px`,...f}},W=typeof window!="undefined"?s.exports.useLayoutEffect:s.exports.useEffect;function _(e,n,t,r){const l=s.exports.useRef(n);W(()=>{l.current=n},[n]),s.exports.useEffect(()=>{const o=(t==null?void 0:t.current)||window;if(!(o&&o.addEventListener))return;const i=a=>l.current(a);return o.addEventListener(e,i,r),()=>{o.removeEventListener(e,i)}},[e,t,r])}const Y=e=>!e,K=(e=!1)=>{const[n,t]=s.exports.useState(e),r=s.exports.useCallback(()=>t(Y),[t]),l=s.exports.useCallback(()=>t(!0),[t]),o=s.exports.useCallback(()=>t(!1),[t]);return{value:n,toggle:r,setTrue:l,setFalse:o,setValue:t}},M=e=>`${e} can only have one child. Consider wrapping your children in a <div> or <span> element.`,U=A("dialog"),X=s.exports.forwardRef(({id:e,children:n,visible:t=!1,position:r="top",parentElement:l,className:o},i)=>{const a=s.exports.useRef(null),[g,u]=s.exports.useState({left:"0px",top:"0px"});return s.exports.useEffect(()=>{const p=G(r,a.current,l);u(p)},[l,r]),w(O,{children:w("div",{id:e,ref:$([a,i]),className:V(F,o),style:{animation:B(t),...g},children:n})})}),v=s.exports.forwardRef(({children:e,triggerable:n=!0,content:t,visible:r,className:l,position:o,onVisibleChange:i,trigger:a="click"},g)=>{if(s.exports.Children.count(e)>1)throw Error(M("Dialog"));const u=s.exports.useRef(U()),p=s.exports.useRef(null),{value:h,toggle:c,setValue:f,setFalse:y,setTrue:E}=K(r||!1),D=n&&h,b=typeof r=="boolean"?r&&D:D,m=T(b,L),x=s.exports.useRef(null);s.exports.useEffect(()=>{typeof r=="boolean"&&f(r)},[r]),s.exports.useEffect(()=>{i==null||i(b)},[b]);const I=s.exports.useCallback(d=>{m||(d.preventDefault(),d.stopPropagation(),E())},[E,m]),S=s.exports.useCallback(d=>{if(!m)return;d.preventDefault(),d.stopPropagation();const k=d.target;if(k===x.current||!k.closest(`#${u.current}`))return y()},[y,m]);return _(a==="click"?"mousedown":"mouseover",I,x),_(a==="click"?"mousedown":"mouseout",S,a==="click"?{current:null}:x),!n||!t?w(R,{children:e}):q(R,{children:[m&&w(X,{id:u.current,ref:$([g,p]),visible:b,parentElement:x.current,className:l,toggle:c,position:o,children:t}),s.exports.cloneElement(e,{ref:x})]})});try{v.displayName="Dialog",v.__docgenInfo={description:"",displayName:"Dialog",props:{content:{defaultValue:null,description:"",name:"content",required:!1,type:{name:"Element"}},visible:{defaultValue:{value:!1},description:"",name:"visible",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"DialogPositions"}},triggerable:{defaultValue:{value:!0},description:"",name:"triggerable",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"",name:"onVisibleChange",required:!1,type:{name:"(visible: boolean) => void"}},listenersEscapeHatch:{defaultValue:null,description:"",name:"listenersEscapeHatch",required:!1,type:{name:"boolean"}},trigger:{defaultValue:{value:"click"},description:"",name:"trigger",required:!1,type:{name:'"click" | "hover"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["packages/react/src/lib/Feedback/Dialog/Dialog.tsx#Dialog"]={docgenInfo:v.__docgenInfo,name:"Dialog",path:"packages/react/src/lib/Feedback/Dialog/Dialog.tsx#Dialog"})}catch{}export{v as D};
//# sourceMappingURL=Dialog.da546da4.js.map
