{"version":3,"file":"Modal.stories.78254683.js","sources":["../../../../packages/core/src/styles/system/feedback/modal/helpers.ts","../../../../node_modules/usehooks-ts/dist/esm/useBoolean/useBoolean.js","../../../../packages/react/src/lib/Feedback/Modal/Modal.tsx"],"sourcesContent":["import { vars } from '../../../variables/index.css';\nimport { modal } from './modal.css';\n\nexport const MODAL_ANIMATION_TIMING = 260;\n\nconst makeAnimation = (animation: string) =>\n  `${animation} ${MODAL_ANIMATION_TIMING}ms ${vars.transition.easing}`;\n\nexport const getModalAnimation = (visible?: boolean) => {\n  if (visible) {\n    return makeAnimation(modal.animation.in);\n  }\n  return makeAnimation(modal.animation.out);\n};\n","import { useCallback, useState } from 'react';\nfunction useBoolean(defaultValue) {\n    const [value, setValue] = useState(!!defaultValue);\n    const setTrue = useCallback(() => setValue(true), []);\n    const setFalse = useCallback(() => setValue(false), []);\n    const toggle = useCallback(() => setValue(x => !x), []);\n    return { value, setValue, setTrue, setFalse, toggle };\n}\nexport default useBoolean;\n//# sourceMappingURL=useBoolean.js.map","import {\n  clsx,\n  getModalAnimation,\n  modal,\n  MODAL_ANIMATION_TIMING,\n} from '@icarus/core';\nimport { forwardRef, Ref, useCallback, useState } from 'react';\nimport { useBoolean } from 'usehooks-ts';\nimport { Button } from '../../General/Button';\nimport { Heading } from '../../General/Text';\nimport { CloseIcon, MaximizeIcon } from '../../Icons';\nimport { useDelayedUnmount } from '../../internal/hooks/useDelayedUnmount';\nimport { Portal } from '../../internal/Portal';\nimport { Box } from '../../Layout/Box';\nimport { Container } from '../../Layout/Container';\nimport { Spacing } from '../../Layout/Spacing';\n\ntype ModalFooterProps = {\n  ok?: {\n    label?: string;\n    onClick?: () => void;\n  };\n  cancel?: {\n    label?: string;\n    onClick?: () => void;\n  };\n};\n\ntype ModalProps = {\n  footer?: JSX.Element;\n  title?: string;\n  content?: JSX.Element;\n  visible?: boolean;\n  onVisibilityChange?: (visible: boolean) => void;\n  className?: string;\n  maximizable?: boolean;\n  maximized?: boolean;\n  maskClassName?: string;\n} & ModalFooterProps;\n\nconst opposite = (prevState: boolean) => !prevState;\n\nexport const useClosure = (initialValue?: boolean) => {\n  const [value, setValue] = useState(initialValue || false);\n  const onClick = useCallback(() => {\n    setValue(opposite);\n  }, [setValue]);\n  return {\n    onClick,\n  };\n};\n\nconst ModalFooter = ({\n  ok = {\n    label: 'Ok',\n  },\n  cancel = {\n    label: 'Cancel',\n  },\n}: ModalFooterProps) => {\n  return <div className={clsx(modal.footer, 'modal-footer')}>Footer</div>;\n};\n\nexport const Modal = forwardRef(\n  (\n    {\n      title,\n      footer,\n      content,\n      visible: visibleProp,\n      onVisibilityChange,\n      className,\n      maskClassName,\n      ok,\n      maximized: mxProp = false,\n      maximizable,\n      cancel,\n    }: ModalProps,\n    ref: Ref<HTMLDivElement>\n  ) => {\n    const { value: maximized, toggle: toggleMaximized } = useBoolean(mxProp);\n    const visible = useDelayedUnmount(\n      visibleProp || false,\n      MODAL_ANIMATION_TIMING\n    );\n    const contentJsx = (\n      <div className={clsx(modal.content, 'modal-content')}>{content}</div>\n    );\n    if (!visible) return null;\n    return (\n      <Portal>\n        <div\n          className={clsx(\n            modal.mask,\n            maximized && modal.maskMaximized,\n            maskClassName\n          )}\n          style={{\n            animation: getModalAnimation(visibleProp),\n          }}\n        >\n          <div\n            className={clsx(\n              modal.body,\n              maximized && modal.bodyMaximized,\n              className,\n              'modal-body'\n            )}\n          >\n            <div className={clsx(modal.header, 'modal-header')}>\n              {title && (\n                <Heading level=\"4\" className={clsx(modal.header.title)}>\n                  {title}\n                </Heading>\n              )}\n              <Spacing\n                gap=\"md\"\n                className={clsx(modal.actions.base, 'modal-actions')}\n              >\n                {maximizable && (\n                  <Button\n                    radius=\"round\"\n                    color=\"success\"\n                    onClick={toggleMaximized}\n                    size=\"small\"\n                    className={clsx(modal.actions.button, 'modal-maximize')}\n                  >\n                    <MaximizeIcon\n                      maximized={maximized}\n                      color=\"onsurface\"\n                      size=\"xs\"\n                    />\n                  </Button>\n                )}\n                <Button\n                  radius=\"round\"\n                  color=\"danger\"\n                  size=\"small\"\n                  className={clsx('modal-close')}\n                >\n                  <CloseIcon color=\"onsurface\" size=\"xs\" />\n                </Button>\n              </Spacing>\n            </div>\n            {content && contentJsx}\n            {footer && <ModalFooter ok={ok} cancel={ok} />}\n          </div>\n        </div>\n      </Portal>\n    );\n  }\n);\n"],"names":["useState","useCallback","setValue","onClick","_jsx","forwardRef","title","footer","content","visibleProp","onVisibilityChange","className","maskClassName","ok","maximizable","cancel","maximized","toggleMaximized","_jsxs"],"mappings":"m0BAGO,KAAM,GAAyB,IAEhC,EAAgB,AAAC,GACrB,GAAG,KAAa,OAA4B,EAAK,WAAW,SAEjD,EAAoB,AAAC,GAC5B,AACK,EADL,EACmB,EAAM,UAAU,GAElB,EAAM,UAAU,GAFI,ECT3C,WAAoB,EAAc,CAC9B,KAAM,CAAC,EAAO,GAAYA,EAAAA,QAAAA,SAAS,CAAC,CAAC,CAAY,EAC3C,EAAUC,EAAAA,QAAAA,YAAY,IAAM,EAAS,EAAI,EAAG,CAAA,CAAE,EAC9C,EAAWA,EAAAA,QAAAA,YAAY,IAAM,EAAS,EAAK,EAAG,CAAA,CAAE,EAChD,EAASA,EAAW,QAAA,YAAC,IAAM,EAAS,GAAK,CAAC,CAAC,EAAG,CAAA,CAAE,EACtD,MAAO,CAAE,QAAO,WAAU,UAAS,WAAU,QAAM,CACvD,CCiCA,KAAA,GAAA,AAAA,GAAA,CAAA,EAEO,EAAA,AAAA,GAAA,CACL,KAAA,CAAA,EAAA,GAAAD,EAAAA,QAAAA,SAAA,GAAA,EAAA,EAIA,MAAA,CAAO,QAHPC,EAAAA,QAAAA,YAAA,IAAA,CACEC,EAAAA,CAAAA,CAAQ,EAAA,CAAA,CAAA,CAAA,CAGRC,CAEH,EAED,EAAA,CAAA,CAAqB,KAAA,CACd,MAAA,IACI,EADJ,SAAA,CAGI,MAAA,QACA,KAGTC,EAAA,MAAA,CAAO,UAAA,EAAA,EAAA,OAAA,cAAA,EAAoB,SAAA,QAApB,CAAA,EAGF,EAAAC,EAAA,QAAA,WAAA,CAAA,CAEH,QACEC,SACAC,UACAC,QAAAA,EACSC,qBACTC,YACAC,gBACAC,KACAC,UAAAA,EAAAA,GACoB,cACpBC,UACAC,IAAAA,CAIF,KAAA,CAAM,MAAA,EAASC,OAAAA,GAAmBC,EAAAA,CAAAA,EAClC,EAAA,EAAA,GAAA,GAAA,CAAA,EAIA,EAAAb,EAAA,MAAA,CACE,UAAA,EAAA,EAAA,QAAA,eAAA,EAAoB,SAAA,CAAmCI,CAAAA,EAEzD,MAAA,GACAJ,EAAA,EAAA,CACE,SAAAA,EAAA,MAAA,CACE,UAAA,EAAA,EAAA,KAAA,GAAA,EAAA,cAAA,CAAA,EACiB,MAAA,CAKR,UAAA,EAAA,CAAA,CACuB,EADvB,SAAAc,EAAA,MAAA,CAIP,UAAA,EAAA,EAAA,KAAA,GAAA,EAAA,cAAA,EAAA,YAAA,EACiB,SAAA,CAAAA,EAAA,MAAA,CAOf,UAAA,EAAA,EAAA,OAAA,cAAA,EAAoB,SAAA,CAAA,GAAAd,EAAA,EAAA,CAEhB,MAAA,IAAe,UAAA,EAAA,EAAA,OAAA,KAAA,EAAmB,SAAA,CAC/BE,CAAAA,EAAAA,EAAAA,EAAAA,CAGL,IAAA,KACM,UAAA,EAAA,EAAA,QAAA,KAAA,eAAA,EACW,SAAA,CAAA,GAAAF,EAAA,EAAA,CAGb,OAAA,QACS,MAAA,UACD,QAAA,EACGa,KAAAA,QACJ,UAAA,EAAA,EAAA,QAAA,OAAA,gBAAA,EACU,SAAAb,EAAA,EAAA,CAEf,YACE,MAAA,YACM,KAAA,IACD,CAAA,CAHP,CAAA,EAAAA,EAAA,EAAA,CAOJ,OAAA,QACS,MAAA,SACD,KAAA,QACD,UAAA,EAAA,aAAA,EACU,SAAAA,EAAA,EAAA,CAEf,MAAA,YAAiB,KAAA,IAAiB,CAAA,CAAlC,CAAA,CAAA,CAzBJ,CAAA,CAAA,CANF,CAAA,EAAA,GAAA,EAAA,GAAAA,EAAA,EAAA,CAoCW,KAAa,OAAA,CAAgBS,CAAAA,CAAAA,CA5C1C,CAAA,CAAA,CAAA,CAVF,CAAA,EAHU,IA8Df,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}